{"version":3,"sources":["node_modules/process/browser.js","src/TwiceJS.js","index.js"],"names":["cachedSetTimeout","cachedClearTimeout","process","module","exports","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","setTimeout","e","call","runClearTimeout","marker","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","Item","array","noop","nextTick","args","Array","arguments","i","push","prototype","apply","title","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","TwiceJS","options","DEFAULT_OPTIONS","clear","from","keys","map","_decodeKey","bind","reduce","acc","key","count","_dataset","get","item","constructor","Object","count_key","key_encoder","ENCODERS","JSON","BASE_64","size","Map","data","_process","_keyify","set","oldKey","newKey","has","oldCount","newKeyExists","remove","append","delete","isArray","includes","_normalize","forEach","toString","stringify","btoa","atob","parse","err","require","default","global","window","document","hasOwnProperty","dedupe","_instance","twiceJs"],"mappings":"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","file":"TwiceJS.min.js","sourceRoot":"..","sourcesContent":["// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/**\r\n * @property {Object} options\r\n * @property {Map} dataset\r\n */\r\nexport default class TwiceJS {\r\n\r\n    /**\r\n     * @returns {Object}\r\n     */\r\n    static get DEFAULT_OPTIONS() {\r\n        return {\r\n            count_key: '_count',\r\n            key_encoder: TwiceJS.ENCODERS.JSON\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @returns {Object}\r\n     */\r\n    static get ENCODERS() {\r\n        return {\r\n            JSON: 'json',\r\n            BASE_64: 'base64'\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @returns {Array}\r\n     */\r\n    get entries() {\r\n        return Array.from(this.keys.map(this._decodeKey.bind(this)))\r\n    }\r\n\r\n    get encodedEntries() {\r\n        return Array.from(this.keys)\r\n    }\r\n\r\n    /**\r\n     * @returns {Object[] | Array[]}\r\n     */\r\n    get withCount() {\r\n        return this.keys.reduce((acc, key) => {\r\n            const count = this._dataset.get(key)\r\n            const item = this._decodeKey(key)\r\n\r\n            if (item.constructor !== Object)\r\n                return [...acc, [item, count]]\r\n\r\n            return [\r\n                ...acc,\r\n                {\r\n                    ...item,\r\n                    ...{ [this.options.count_key]: count }\r\n                }\r\n            ]\r\n        }, [])\r\n    }\r\n\r\n    /**\r\n     * @returns {Array}\r\n     */\r\n    get keys() {\r\n        return [...this._dataset.keys()]\r\n    }\r\n\r\n    /**\r\n     * @returns {Map}\r\n     */\r\n    get rawMap() {\r\n        return this._dataset\r\n    }\r\n\r\n    /**\r\n     * @param {Object} options \r\n     */\r\n    constructor(options = {}) {\r\n        this.options = { ...TwiceJS.DEFAULT_OPTIONS, ...options }\r\n        this.clear()\r\n    }\r\n\r\n    /**\r\n     * @returns {Boolean}\r\n     */\r\n    isEmpty() {\r\n        return this.keys.length === 0 || this._dataset.size === 0\r\n    }\r\n\r\n    /**\r\n     * @returns {TwiceJS}\r\n     */\r\n    clear() {\r\n        this._dataset = new Map()\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * @param {Array|*} data\r\n     * @returns {TwiceJS}\r\n     */\r\n    append(data) {\r\n        return this._process(data, item => {\r\n            const key = this._keyify(item)\r\n            let count = this._dataset.get(key) || 0\r\n\r\n            this._dataset.set(key, count += 1)\r\n        })\r\n    }\r\n\r\n    /**\r\n     * @param {Array|*} oldKey\r\n     * @param {Array|*} newKey\r\n     * @returns {TwiceJS}\r\n     */\r\n    replace(oldKey, newKey) {\r\n        oldKey = this._keyify(oldKey)\r\n        newKey = this._keyify(newKey)\r\n\r\n        if (!this._dataset.has(oldKey))\r\n            throw new Error(`[Err] TwiceJS.set :: key '${oldKey}' doesn't exists on dataset`)\r\n\r\n        const oldCount = this._dataset.get(oldKey)\r\n        const newKeyExists = this._dataset.has(newKey)\r\n\r\n        this\r\n            .remove(oldKey)\r\n            .append(newKey)\r\n\r\n        if (!newKeyExists)\r\n            this._dataset.set(newKey, oldCount)\r\n\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * @param {Array|*} data\r\n     * @returns {TwiceJS}\r\n     */\r\n    remove(data) {\r\n        return this._process(data, item => {\r\n            const key = this._keyify(item)\r\n\r\n            if (this._dataset.has(key))\r\n                this._dataset.delete(key)\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Get if an item exists on dataset\r\n     * \r\n     * @param {*} item \r\n     * @returns Boolean\r\n     */\r\n    has(item) {\r\n        if (!Array.isArray(item) && item.constructor !== Object)\r\n            return this.keys.includes(item)\r\n        return this._dataset.has(item)\r\n    }\r\n\r\n    /**\r\n     * Get an item occurrences count\r\n     * \r\n     * @param {*} item \r\n     * @returns {Number}\r\n     */\r\n    occurrence(item) {\r\n        const key = this._keyify(item)\r\n        return this._dataset.get(key) || 0\r\n    }\r\n\r\n    /**\r\n     * Encode an entry according the defined key_encoder option\r\n     * \r\n     * @param {*} item \r\n     * @returns {String}\r\n     */\r\n    encode(item) {\r\n        return this._keyify(item)\r\n    }\r\n\r\n    /**\r\n     * Decode an entry according the defined key_encoder option\r\n     * \r\n     * @param {String} key\r\n     * @returns {*}\r\n     */\r\n    decode(key) {\r\n        return this._decodeKey(key)\r\n    }\r\n\r\n    /**\r\n     * @param {Array} data\r\n     * @param {Function} process\r\n     * @returns {TwiceJS}\r\n     */\r\n    _process(data, process) {\r\n        if (!Array.isArray(data))\r\n            data = [data]\r\n\r\n        data = this._normalize(data)\r\n        data.forEach(process.bind(this))\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * @param {*} item \r\n     * @returns {String}\r\n     */\r\n    _keyify(item) {\r\n        if (!Array.isArray(item) && item.constructor !== Object)\r\n            return item.toString()\r\n\r\n        try {\r\n            item = JSON.stringify(item)\r\n\r\n            if (this.options.key_encoder === TwiceJS.ENCODERS.BASE_64)\r\n                item = btoa(item)\r\n        } catch (e) {\r\n            throw new Error(`[Err] TwiceJS._keyify :: error on keyify item ${item}\\n${e}`)\r\n        }\r\n        return item\r\n    }\r\n\r\n    /**\r\n     * @param {String} key\r\n     * @returns {*}\r\n     */\r\n    _decodeKey(key) {\r\n        try {\r\n            if (this.options.key_encoder === TwiceJS.ENCODERS.BASE_64)\r\n                key = atob(key)\r\n\r\n            return JSON.parse(key)\r\n        } catch (err) {\r\n            return key;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {Array|Object|*} data\r\n     * @returns {Array|Object|*}\r\n     */\r\n    _normalize(data) {\r\n        try {\r\n            return JSON.parse(JSON.stringify(data))\r\n        } catch (e) {\r\n            return data\r\n        }\r\n    }\r\n\r\n}","const TwiceJS = require('./src/TwiceJS').default\r\n\r\n// Server side\r\nif (typeof module !== 'undefined' && typeof module.exports !== 'undefined' && typeof global !== 'undefined')\r\n    module.exports = TwiceJS\r\n\r\n// Browser side\r\nif (typeof window !== 'undefined' && typeof document !== 'undefined') {\r\n    if (!window.hasOwnProperty('Zangdar'))\r\n        window.TwiceJS = TwiceJS\r\n\r\n    if (!Array.prototype.TwiceJS)\r\n        Array.prototype.dedupe = function (options) {\r\n            const _instance = new TwiceJS(options)\r\n            _instance.append(this)\r\n            this.twiceJs = _instance\r\n            return this\r\n        }\r\n}"]}